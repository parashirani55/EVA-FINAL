<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ChatGPT Live Chatbot</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#f3f4f6;
  --card:#ffffff;
  --accent:#0b5cff;
  --text:#111827;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:linear-gradient(180deg,var(--bg),#e9eefb);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
  color:var(--text);
}

.chat-wrapper{
  width:100%;
  max-width:720px;
  background:var(--card);
  border-radius:12px;
  box-shadow:0 10px 30px rgba(10,20,40,0.08);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  height:80vh;
}

header{
  padding:16px 20px;
  border-bottom:1px solid #eef2ff;
  background:linear-gradient(90deg,#ffffff,#f7fbff);
}
header h1{margin:0;font-size:18px}

.chat-window{
  flex:1;
  padding:20px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:12px;
  background:linear-gradient(180deg,#fbfdff,#ffffff);
}

.msg{max-width:78%; padding:12px 14px; border-radius:10px; line-height:1.4; box-shadow:0 2px 6px rgba(12,18,36,0.04)}
.user{align-self:flex-end; background:#0b5cff;color:white;border-bottom-right-radius:4px}
.assistant{align-self:flex-start; background:#f3f6fb;color:var(--text)}

.chat-form{
  display:flex;
  gap:8px;
  padding:12px;
  border-top:1px solid #eef2ff;
}
.chat-form input{
  flex:1;
  padding:12px;
  border-radius:10px;
  border:1px solid #e6eefc;
  outline:none;
  font-size:15px;
}
.chat-form button{
  padding:10px 16px;
  border-radius:10px;
  border:0;
  background:var(--accent);
  color:white;
  font-weight:600;
  cursor:pointer;
}
.chat-form button:active{transform:translateY(1px)}
</style>
</head>
<body>
<div class="chat-wrapper">
  <header><h1>Chat with GPT</h1></header>
  <div id="chat" class="chat-window"></div>
  <form id="chatForm" class="chat-form">
    <input id="input" autocomplete="off" placeholder="Type your message..." />
    <button type="submit">Send</button>
  </form>
</div>

<script>
// WARNING: Putting your API key here is NOT SAFE for production!
const OPENAI_KEY = "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";

const chat = document.getElementById('chat');
const form = document.getElementById('chatForm');
const input = document.getElementById('input');

const messages = [
  { role: "system", content: "You are a helpful assistant." }
];

function appendMessage(role, text) {
  const el = document.createElement('div');
  el.className = 'msg ' + role;
  el.textContent = text;
  chat.appendChild(el);
  chat.scrollTop = chat.scrollHeight;
}

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const text = input.value.trim();
  if (!text) return;
  appendMessage('user', text);
  messages.push({ role: "user", content: text });
  input.value = '';
  appendMessage('assistant', '…thinking');

  try {
    const resp = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${OPENAI_KEY}`
      },
      body: JSON.stringify({
        model: "gpt-4o", 
        messages: messages,
        max_tokens: 500,
        temperature: 0.7
      })
    });

    if (!resp.ok) {
      const errText = await resp.text();
      throw new Error(errText);
    }
    const data = await resp.json();
    const assistantText = data.choices?.[0]?.message?.content || "No reply";

    const lastThinking = chat.querySelector('.assistant:last-child');
    if (lastThinking && lastThinking.textContent === '…thinking') lastThinking.remove();

    appendMessage('assistant', assistantText);
    messages.push({ role: "assistant", content: assistantText });
  } catch (err) {
    const lastThinking = chat.querySelector('.assistant:last-child');
    if (lastThinking && lastThinking.textContent === '…thinking') lastThinking.remove();
    appendMessage('assistant', 'Error: ' + err.message);
    console.error(err);
  }
});
</script>
</body>
</html>
