{"ast":null,"code":"var _jsxFileName = \"D:\\\\EVA-projects\\\\src\\\\pages\\\\Calls.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { CheckCircle, XCircle, Clock, Eye, X, Phone, Activity } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Calls() {\n  _s();\n  const [calls, setCalls] = useState([]); // past call history\n  const [liveCalls, setLiveCalls] = useState([]); // ongoing calls\n  const [selectedCall, setSelectedCall] = useState(null);\n\n  // Fetch call history\n  const fetchCallHistory = async () => {\n    try {\n      const res = await fetch('/api/call-history');\n      const data = await res.json();\n      setCalls(data);\n    } catch (err) {\n      console.error('Error fetching call history', err);\n    }\n  };\n\n  // Fetch live calls\n  const fetchLiveCalls = async () => {\n    try {\n      const res = await fetch('/api/active-calls');\n      const data = await res.json();\n      setLiveCalls(data);\n    } catch (err) {\n      console.error('Error fetching live calls', err);\n    }\n  };\n\n  // Fetch both on mount\n  useEffect(() => {\n    fetchCallHistory();\n    fetchLiveCalls();\n    const interval = setInterval(fetchLiveCalls, 5000); // update live calls every 5s\n    return () => clearInterval(interval);\n  }, []);\n\n  // Map Twilio status â†’ UI config\n  const getStatusConfig = status => {\n    switch (status) {\n      case 'queued':\n      case 'ringing':\n        return {\n          bg: 'bg-amber-100',\n          text: 'text-amber-700',\n          icon: Clock\n        };\n      case 'in-progress':\n        return {\n          bg: 'bg-blue-100',\n          text: 'text-blue-700',\n          icon: Activity\n        };\n      case 'completed' || 'Answered':\n        return {\n          bg: 'bg-emerald-100',\n          text: 'text-emerald-700',\n          icon: CheckCircle\n        };\n      case 'failed':\n      case 'busy':\n      case 'no-answer':\n        return {\n          bg: 'bg-red-100',\n          text: 'text-red-700',\n          icon: XCircle\n        };\n      default:\n        return {\n          bg: 'bg-slate-100',\n          text: 'text-slate-700',\n          icon: Clock\n        };\n    }\n  };\n\n  // Format duration as mm:ss\n  const formatDuration = seconds => {\n    if (!seconds || seconds <= 0) return '00:00';\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;\n  };\n\n  // Live elapsed time (mm:ss)\n  const getElapsedTime = startTime => {\n    const seconds = Math.floor((Date.now() - new Date(startTime)) / 1000);\n    return formatDuration(seconds);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-8 p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-slate-900\",\n          children: \"Call Logs & Live Monitor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-600 mt-1\",\n          children: \"View past calls and monitor active calls in real-time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-sm border border-slate-100 p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold text-slate-900 mb-4\",\n        children: \"Active Calls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), liveCalls.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-slate-500\",\n        children: \"No active calls right now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: liveCalls.map(call => {\n          const {\n            bg,\n            text,\n            icon: StatusIcon\n          } = getStatusConfig(call.status);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-4 rounded-2xl border ${bg} ${text}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-semibold\",\n                  children: call.customer\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm\",\n                  children: call.phone\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(StatusIcon, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs\",\n                  children: call.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: [\"Campaign: \", call.campaign]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: [\"Duration: \", getElapsedTime(call.started_at)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm italic mt-2\",\n              children: [\"AI Message: \\\"\", call.ai_message, \"\\\"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 37\n            }, this)]\n          }, call.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 border-b border-slate-200\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-slate-900\",\n          children: \"Call History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-slate-50 border-b border-slate-200\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left px-6 py-4 text-sm font-semibold text-slate-700\",\n                children: \"Customer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left px-6 py-4 text-sm font-semibold text-slate-700\",\n                children: \"Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left px-6 py-4 text-sm font-semibold text-slate-700\",\n                children: \"Time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left px-6 py-4 text-sm font-semibold text-slate-700\",\n                children: \"Duration\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left px-6 py-4 text-sm font-semibold text-slate-700\",\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-left px-6 py-4 text-sm font-semibold text-slate-700\",\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"divide-y divide-slate-100\",\n            children: calls.map(call => {\n              const {\n                bg,\n                text,\n                icon: StatusIcon\n              } = getStatusConfig(call.status);\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-slate-50 transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 font-medium text-slate-900\",\n                  children: call.customer\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 text-slate-600\",\n                  children: call.phone\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 text-slate-600\",\n                  children: new Date(call.started_at).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 text-slate-600\",\n                  children: formatDuration(call.duration)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `inline-flex items-center space-x-2 px-3 py-1 rounded-full text-xs font-medium ${bg} ${text}`,\n                    children: [/*#__PURE__*/_jsxDEV(StatusIcon, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: call.status\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setSelectedCall(call),\n                    className: \"inline-flex items-center space-x-1 text-blue-600 hover:text-blue-700 font-medium text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(Eye, {\n                      className: \"w-4 h-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 156,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"View\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 157,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 41\n                }, this)]\n              }, call.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 37\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this), selectedCall && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-6 border-b border-slate-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold text-slate-900\",\n              children: \"Call Transcript\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-slate-600 mt-1\",\n              children: [selectedCall.customer, \" \\u2022 \", new Date(selectedCall.started_at).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSelectedCall(null),\n            className: \"p-2 hover:bg-slate-100 rounded-xl transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5 text-slate-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 max-h-96 overflow-y-auto\",\n          children: selectedCall.transcript ? (() => {\n            let transcriptArray;\n            try {\n              transcriptArray = JSON.parse(selectedCall.transcript);\n            } catch {\n              transcriptArray = [];\n            }\n            return transcriptArray.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: transcriptArray.map((line, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex ${line.from === 'AI' ? 'justify-start' : 'justify-end'}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ${line.from === 'AI' ? 'bg-blue-100 text-blue-900' : 'bg-slate-100 text-slate-900'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs font-medium mb-1 opacity-70\",\n                    children: line.from\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 57\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-sm\",\n                    children: line.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 57\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 53\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 49\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-12\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4\",\n                children: /*#__PURE__*/_jsxDEV(Phone, {\n                  className: \"w-8 h-8 text-slate-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-slate-500\",\n                children: \"No transcript available for this call\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 41\n            }, this);\n          })() : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4\",\n              children: /*#__PURE__*/_jsxDEV(Phone, {\n                className: \"w-8 h-8 text-slate-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-slate-500\",\n              children: \"No transcript available for this call\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n_s(Calls, \"YO3W5UJxbsy7L/6C5BBxBk86Qz8=\");\n_c = Calls;\nexport default Calls;\nvar _c;\n$RefreshReg$(_c, \"Calls\");","map":{"version":3,"names":["React","useState","useEffect","CheckCircle","XCircle","Clock","Eye","X","Phone","Activity","jsxDEV","_jsxDEV","Calls","_s","calls","setCalls","liveCalls","setLiveCalls","selectedCall","setSelectedCall","fetchCallHistory","res","fetch","data","json","err","console","error","fetchLiveCalls","interval","setInterval","clearInterval","getStatusConfig","status","bg","text","icon","formatDuration","seconds","mins","Math","floor","secs","String","padStart","getElapsedTime","startTime","Date","now","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","call","StatusIcon","customer","phone","campaign","started_at","ai_message","id","toLocaleString","duration","onClick","transcript","transcriptArray","JSON","parse","line","index","from","_c","$RefreshReg$"],"sources":["D:/EVA-projects/src/pages/Calls.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { CheckCircle, XCircle, Clock, Eye, X, Phone, Activity } from 'lucide-react';\r\n\r\nfunction Calls() {\r\n    const [calls, setCalls] = useState([]); // past call history\r\n    const [liveCalls, setLiveCalls] = useState([]); // ongoing calls\r\n    const [selectedCall, setSelectedCall] = useState(null);\r\n\r\n    // Fetch call history\r\n    const fetchCallHistory = async () => {\r\n        try {\r\n            const res = await fetch('/api/call-history');\r\n            const data = await res.json();\r\n            setCalls(data);\r\n        } catch (err) {\r\n            console.error('Error fetching call history', err);\r\n        }\r\n    };\r\n\r\n    // Fetch live calls\r\n    const fetchLiveCalls = async () => {\r\n        try {\r\n            const res = await fetch('/api/active-calls');\r\n            const data = await res.json();\r\n            setLiveCalls(data);\r\n        } catch (err) {\r\n            console.error('Error fetching live calls', err);\r\n        }\r\n    };\r\n\r\n    // Fetch both on mount\r\n    useEffect(() => {\r\n        fetchCallHistory();\r\n        fetchLiveCalls();\r\n        const interval = setInterval(fetchLiveCalls, 5000); // update live calls every 5s\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // Map Twilio status â†’ UI config\r\n    const getStatusConfig = (status) => {\r\n        switch (status) {\r\n            case 'queued':\r\n            case 'ringing':\r\n                return { bg: 'bg-amber-100', text: 'text-amber-700', icon: Clock };\r\n            case 'in-progress':\r\n                return { bg: 'bg-blue-100', text: 'text-blue-700', icon: Activity };\r\n            case 'completed' || 'Answered':\r\n                return { bg: 'bg-emerald-100', text: 'text-emerald-700', icon: CheckCircle };\r\n            case 'failed':\r\n            case 'busy':\r\n            case 'no-answer':\r\n                return { bg: 'bg-red-100', text: 'text-red-700', icon: XCircle };\r\n            default:\r\n                return { bg: 'bg-slate-100', text: 'text-slate-700', icon: Clock };\r\n        }\r\n    };\r\n\r\n    // Format duration as mm:ss\r\n    const formatDuration = (seconds) => {\r\n        if (!seconds || seconds <= 0) return '00:00';\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = seconds % 60;\r\n        return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;\r\n    };\r\n\r\n    // Live elapsed time (mm:ss)\r\n    const getElapsedTime = (startTime) => {\r\n        const seconds = Math.floor((Date.now() - new Date(startTime)) / 1000);\r\n        return formatDuration(seconds);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-8 p-6\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-slate-900\">Call Logs & Live Monitor</h1>\r\n                    <p className=\"text-slate-600 mt-1\">View past calls and monitor active calls in real-time</p>\r\n                </div>\r\n                {/* <button\r\n                    onClick={() => { fetchCallHistory(); fetchLiveCalls(); }}\r\n                    className=\"px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-700 hover:bg-slate-50 transition-colors\"\r\n                >\r\n                    Refresh\r\n                </button> */}\r\n            </div>\r\n\r\n            {/* Live Calls Section */}\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-slate-100 p-6\">\r\n                <h2 className=\"text-xl font-semibold text-slate-900 mb-4\">Active Calls</h2>\r\n                {liveCalls.length === 0 ? (\r\n                    <p className=\"text-slate-500\">No active calls right now</p>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        {liveCalls.map((call) => {\r\n                            const { bg, text, icon: StatusIcon } = getStatusConfig(call.status);\r\n                            return (\r\n                                <div key={call.id} className={`p-4 rounded-2xl border ${bg} ${text}`}>\r\n                                    <div className=\"flex justify-between mb-2\">\r\n                                        <div>\r\n                                            <p className=\"font-semibold\">{call.customer}</p>\r\n                                            <p className=\"text-sm\">{call.phone}</p>\r\n                                        </div>\r\n                                        <div className=\"flex items-center space-x-1\">\r\n                                            <StatusIcon className=\"w-4 h-4\" />\r\n                                            <span className=\"text-xs\">{call.status}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <p className=\"text-sm\">Campaign: {call.campaign}</p>\r\n                                    <p className=\"text-sm\">Duration: {getElapsedTime(call.started_at)}</p>\r\n                                    <p className=\"text-sm italic mt-2\">AI Message: \"{call.ai_message}\"</p>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Past Calls Section */}\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden\">\r\n                <div className=\"p-6 border-b border-slate-200\">\r\n                    <h2 className=\"text-xl font-semibold text-slate-900\">Call History</h2>\r\n                </div>\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                        <thead className=\"bg-slate-50 border-b border-slate-200\">\r\n                            <tr>\r\n                                <th className=\"text-left px-6 py-4 text-sm font-semibold text-slate-700\">Customer</th>\r\n                                <th className=\"text-left px-6 py-4 text-sm font-semibold text-slate-700\">Phone</th>\r\n                                <th className=\"text-left px-6 py-4 text-sm font-semibold text-slate-700\">Time</th>\r\n                                <th className=\"text-left px-6 py-4 text-sm font-semibold text-slate-700\">Duration</th>\r\n                                <th className=\"text-left px-6 py-4 text-sm font-semibold text-slate-700\">Status</th>\r\n                                <th className=\"text-left px-6 py-4 text-sm font-semibold text-slate-700\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-slate-100\">\r\n                            {calls.map((call) => {\r\n                                const { bg, text, icon: StatusIcon } = getStatusConfig(call.status);\r\n                                return (\r\n                                    <tr key={call.id} className=\"hover:bg-slate-50 transition-colors\">\r\n                                        <td className=\"px-6 py-4 font-medium text-slate-900\">{call.customer}</td>\r\n                                        <td className=\"px-6 py-4 text-slate-600\">{call.phone}</td>\r\n                                        <td className=\"px-6 py-4 text-slate-600\">{new Date(call.started_at).toLocaleString()}</td>\r\n                                        <td className=\"px-6 py-4 text-slate-600\">{formatDuration(call.duration)}</td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className={`inline-flex items-center space-x-2 px-3 py-1 rounded-full text-xs font-medium ${bg} ${text}`}>\r\n                                                <StatusIcon className=\"w-3 h-3\" />\r\n                                                <span>{call.status}</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <button\r\n                                                onClick={() => setSelectedCall(call)}\r\n                                                className=\"inline-flex items-center space-x-1 text-blue-600 hover:text-blue-700 font-medium text-sm\"\r\n                                            >\r\n                                                <Eye className=\"w-4 h-4\" />\r\n                                                <span>View</span>\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Transcript Modal */}\r\n            {selectedCall && (\r\n                <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden\">\r\n                        <div className=\"flex items-center justify-between p-6 border-b border-slate-200\">\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold text-slate-900\">Call Transcript</h2>\r\n                                <p className=\"text-slate-600 mt-1\">\r\n                                    {selectedCall.customer} â€¢ {new Date(selectedCall.started_at).toLocaleString()}\r\n                                </p>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setSelectedCall(null)}\r\n                                className=\"p-2 hover:bg-slate-100 rounded-xl transition-colors\"\r\n                            >\r\n                                <X className=\"w-5 h-5 text-slate-500\" />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"p-6 max-h-96 overflow-y-auto\">\r\n                            {selectedCall.transcript ? (\r\n                                (() => {\r\n                                    let transcriptArray;\r\n                                    try { transcriptArray = JSON.parse(selectedCall.transcript); } \r\n                                    catch { transcriptArray = []; }\r\n                                    return transcriptArray.length > 0 ? (\r\n                                        <div className=\"space-y-4\">\r\n                                            {transcriptArray.map((line, index) => (\r\n                                                <div\r\n                                                    key={index}\r\n                                                    className={`flex ${line.from === 'AI' ? 'justify-start' : 'justify-end'}`}\r\n                                                >\r\n                                                    <div\r\n                                                        className={`max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ${\r\n                                                            line.from === 'AI'\r\n                                                                ? 'bg-blue-100 text-blue-900'\r\n                                                                : 'bg-slate-100 text-slate-900'\r\n                                                        }`}\r\n                                                    >\r\n                                                        <div className=\"text-xs font-medium mb-1 opacity-70\">\r\n                                                            {line.from}\r\n                                                        </div>\r\n                                                        <div className=\"text-sm\">{line.text}</div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"text-center py-12\">\r\n                                            <div className=\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                                <Phone className=\"w-8 h-8 text-slate-400\" />\r\n                                            </div>\r\n                                            <p className=\"text-slate-500\">No transcript available for this call</p>\r\n                                        </div>\r\n                                    );\r\n                                })()\r\n                            ) : (\r\n                                <div className=\"text-center py-12\">\r\n                                    <div className=\"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                        <Phone className=\"w-8 h-8 text-slate-400\" />\r\n                                    </div>\r\n                                    <p className=\"text-slate-500\">No transcript available for this call</p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Calls;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,OAAO,EAAEC,KAAK,EAAEC,GAAG,EAAEC,CAAC,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpF,SAASC,KAAKA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACxC,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAChD,MAAM,CAACiB,YAAY,EAAEC,eAAe,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;;EAEtD;EACA,MAAMmB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,mBAAmB,CAAC;MAC5C,MAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;MAC7BT,QAAQ,CAACQ,IAAI,CAAC;IAClB,CAAC,CAAC,OAAOE,GAAG,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEF,GAAG,CAAC;IACrD;EACJ,CAAC;;EAED;EACA,MAAMG,cAAc,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACA,MAAMP,GAAG,GAAG,MAAMC,KAAK,CAAC,mBAAmB,CAAC;MAC5C,MAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;MAC7BP,YAAY,CAACM,IAAI,CAAC;IACtB,CAAC,CAAC,OAAOE,GAAG,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;IACnD;EACJ,CAAC;;EAED;EACAvB,SAAS,CAAC,MAAM;IACZkB,gBAAgB,CAAC,CAAC;IAClBQ,cAAc,CAAC,CAAC;IAChB,MAAMC,QAAQ,GAAGC,WAAW,CAACF,cAAc,EAAE,IAAI,CAAC,CAAC,CAAC;IACpD,OAAO,MAAMG,aAAa,CAACF,QAAQ,CAAC;EACxC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMG,eAAe,GAAIC,MAAM,IAAK;IAChC,QAAQA,MAAM;MACV,KAAK,QAAQ;MACb,KAAK,SAAS;QACV,OAAO;UAAEC,EAAE,EAAE,cAAc;UAAEC,IAAI,EAAE,gBAAgB;UAAEC,IAAI,EAAE/B;QAAM,CAAC;MACtE,KAAK,aAAa;QACd,OAAO;UAAE6B,EAAE,EAAE,aAAa;UAAEC,IAAI,EAAE,eAAe;UAAEC,IAAI,EAAE3B;QAAS,CAAC;MACvE,KAAK,WAAW,IAAI,UAAU;QAC1B,OAAO;UAAEyB,EAAE,EAAE,gBAAgB;UAAEC,IAAI,EAAE,kBAAkB;UAAEC,IAAI,EAAEjC;QAAY,CAAC;MAChF,KAAK,QAAQ;MACb,KAAK,MAAM;MACX,KAAK,WAAW;QACZ,OAAO;UAAE+B,EAAE,EAAE,YAAY;UAAEC,IAAI,EAAE,cAAc;UAAEC,IAAI,EAAEhC;QAAQ,CAAC;MACpE;QACI,OAAO;UAAE8B,EAAE,EAAE,cAAc;UAAEC,IAAI,EAAE,gBAAgB;UAAEC,IAAI,EAAE/B;QAAM,CAAC;IAC1E;EACJ,CAAC;;EAED;EACA,MAAMgC,cAAc,GAAIC,OAAO,IAAK;IAChC,IAAI,CAACA,OAAO,IAAIA,OAAO,IAAI,CAAC,EAAE,OAAO,OAAO;IAC5C,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,GAAG,EAAE,CAAC;IACrC,MAAMI,IAAI,GAAGJ,OAAO,GAAG,EAAE;IACzB,OAAO,GAAGK,MAAM,CAACJ,IAAI,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAID,MAAM,CAACD,IAAI,CAAC,CAACE,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EAC9E,CAAC;;EAED;EACA,MAAMC,cAAc,GAAIC,SAAS,IAAK;IAClC,MAAMR,OAAO,GAAGE,IAAI,CAACC,KAAK,CAAC,CAACM,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAID,IAAI,CAACD,SAAS,CAAC,IAAI,IAAI,CAAC;IACrE,OAAOT,cAAc,CAACC,OAAO,CAAC;EAClC,CAAC;EAED,oBACI3B,OAAA;IAAKsC,SAAS,EAAC,eAAe;IAAAC,QAAA,gBAE1BvC,OAAA;MAAKsC,SAAS,EAAC,mCAAmC;MAAAC,QAAA,eAC9CvC,OAAA;QAAAuC,QAAA,gBACIvC,OAAA;UAAIsC,SAAS,EAAC,mCAAmC;UAAAC,QAAA,EAAC;QAAwB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/E3C,OAAA;UAAGsC,SAAS,EAAC,qBAAqB;UAAAC,QAAA,EAAC;QAAqD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3F;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAOL,CAAC,eAGN3C,OAAA;MAAKsC,SAAS,EAAC,4DAA4D;MAAAC,QAAA,gBACvEvC,OAAA;QAAIsC,SAAS,EAAC,2CAA2C;QAAAC,QAAA,EAAC;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAC1EtC,SAAS,CAACuC,MAAM,KAAK,CAAC,gBACnB5C,OAAA;QAAGsC,SAAS,EAAC,gBAAgB;QAAAC,QAAA,EAAC;MAAyB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,gBAE3D3C,OAAA;QAAKsC,SAAS,EAAC,uCAAuC;QAAAC,QAAA,EACjDlC,SAAS,CAACwC,GAAG,CAAEC,IAAI,IAAK;UACrB,MAAM;YAAEvB,EAAE;YAAEC,IAAI;YAAEC,IAAI,EAAEsB;UAAW,CAAC,GAAG1B,eAAe,CAACyB,IAAI,CAACxB,MAAM,CAAC;UACnE,oBACItB,OAAA;YAAmBsC,SAAS,EAAE,0BAA0Bf,EAAE,IAAIC,IAAI,EAAG;YAAAe,QAAA,gBACjEvC,OAAA;cAAKsC,SAAS,EAAC,2BAA2B;cAAAC,QAAA,gBACtCvC,OAAA;gBAAAuC,QAAA,gBACIvC,OAAA;kBAAGsC,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAEO,IAAI,CAACE;gBAAQ;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAChD3C,OAAA;kBAAGsC,SAAS,EAAC,SAAS;kBAAAC,QAAA,EAAEO,IAAI,CAACG;gBAAK;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtC,CAAC,eACN3C,OAAA;gBAAKsC,SAAS,EAAC,6BAA6B;gBAAAC,QAAA,gBACxCvC,OAAA,CAAC+C,UAAU;kBAACT,SAAS,EAAC;gBAAS;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAClC3C,OAAA;kBAAMsC,SAAS,EAAC,SAAS;kBAAAC,QAAA,EAAEO,IAAI,CAACxB;gBAAM;kBAAAkB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7C,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC,eACN3C,OAAA;cAAGsC,SAAS,EAAC,SAAS;cAAAC,QAAA,GAAC,YAAU,EAACO,IAAI,CAACI,QAAQ;YAAA;cAAAV,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACpD3C,OAAA;cAAGsC,SAAS,EAAC,SAAS;cAAAC,QAAA,GAAC,YAAU,EAACL,cAAc,CAACY,IAAI,CAACK,UAAU,CAAC;YAAA;cAAAX,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACtE3C,OAAA;cAAGsC,SAAS,EAAC,qBAAqB;cAAAC,QAAA,GAAC,gBAAa,EAACO,IAAI,CAACM,UAAU,EAAC,IAAC;YAAA;cAAAZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA,GAbhEG,IAAI,CAACO,EAAE;YAAAb,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAcZ,CAAC;QAEd,CAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAGN3C,OAAA;MAAKsC,SAAS,EAAC,wEAAwE;MAAAC,QAAA,gBACnFvC,OAAA;QAAKsC,SAAS,EAAC,+BAA+B;QAAAC,QAAA,eAC1CvC,OAAA;UAAIsC,SAAS,EAAC,sCAAsC;UAAAC,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrE,CAAC,eACN3C,OAAA;QAAKsC,SAAS,EAAC,iBAAiB;QAAAC,QAAA,eAC5BvC,OAAA;UAAOsC,SAAS,EAAC,QAAQ;UAAAC,QAAA,gBACrBvC,OAAA;YAAOsC,SAAS,EAAC,uCAAuC;YAAAC,QAAA,eACpDvC,OAAA;cAAAuC,QAAA,gBACIvC,OAAA;gBAAIsC,SAAS,EAAC,0DAA0D;gBAAAC,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACtF3C,OAAA;gBAAIsC,SAAS,EAAC,0DAA0D;gBAAAC,QAAA,EAAC;cAAK;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACnF3C,OAAA;gBAAIsC,SAAS,EAAC,0DAA0D;gBAAAC,QAAA,EAAC;cAAI;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClF3C,OAAA;gBAAIsC,SAAS,EAAC,0DAA0D;gBAAAC,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACtF3C,OAAA;gBAAIsC,SAAS,EAAC,0DAA0D;gBAAAC,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACpF3C,OAAA;gBAAIsC,SAAS,EAAC,0DAA0D;gBAAAC,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrF;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,eACR3C,OAAA;YAAOsC,SAAS,EAAC,2BAA2B;YAAAC,QAAA,EACvCpC,KAAK,CAAC0C,GAAG,CAAEC,IAAI,IAAK;cACjB,MAAM;gBAAEvB,EAAE;gBAAEC,IAAI;gBAAEC,IAAI,EAAEsB;cAAW,CAAC,GAAG1B,eAAe,CAACyB,IAAI,CAACxB,MAAM,CAAC;cACnE,oBACItB,OAAA;gBAAkBsC,SAAS,EAAC,qCAAqC;gBAAAC,QAAA,gBAC7DvC,OAAA;kBAAIsC,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAEO,IAAI,CAACE;gBAAQ;kBAAAR,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACzE3C,OAAA;kBAAIsC,SAAS,EAAC,0BAA0B;kBAAAC,QAAA,EAAEO,IAAI,CAACG;gBAAK;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC1D3C,OAAA;kBAAIsC,SAAS,EAAC,0BAA0B;kBAAAC,QAAA,EAAE,IAAIH,IAAI,CAACU,IAAI,CAACK,UAAU,CAAC,CAACG,cAAc,CAAC;gBAAC;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC1F3C,OAAA;kBAAIsC,SAAS,EAAC,0BAA0B;kBAAAC,QAAA,EAAEb,cAAc,CAACoB,IAAI,CAACS,QAAQ;gBAAC;kBAAAf,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC7E3C,OAAA;kBAAIsC,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACrBvC,OAAA;oBAAKsC,SAAS,EAAE,iFAAiFf,EAAE,IAAIC,IAAI,EAAG;oBAAAe,QAAA,gBAC1GvC,OAAA,CAAC+C,UAAU;sBAACT,SAAS,EAAC;oBAAS;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eAClC3C,OAAA;sBAAAuC,QAAA,EAAOO,IAAI,CAACxB;oBAAM;sBAAAkB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACzB;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,eACL3C,OAAA;kBAAIsC,SAAS,EAAC,WAAW;kBAAAC,QAAA,eACrBvC,OAAA;oBACIwD,OAAO,EAAEA,CAAA,KAAMhD,eAAe,CAACsC,IAAI,CAAE;oBACrCR,SAAS,EAAC,0FAA0F;oBAAAC,QAAA,gBAEpGvC,OAAA,CAACL,GAAG;sBAAC2C,SAAS,EAAC;oBAAS;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eAC3B3C,OAAA;sBAAAuC,QAAA,EAAM;oBAAI;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACb;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC;cAAA,GAnBAG,IAAI,CAACO,EAAE;gBAAAb,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAoBZ,CAAC;YAEb,CAAC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,EAGLpC,YAAY,iBACTP,OAAA;MAAKsC,SAAS,EAAC,sFAAsF;MAAAC,QAAA,eACjGvC,OAAA;QAAKsC,SAAS,EAAC,+EAA+E;QAAAC,QAAA,gBAC1FvC,OAAA;UAAKsC,SAAS,EAAC,iEAAiE;UAAAC,QAAA,gBAC5EvC,OAAA;YAAAuC,QAAA,gBACIvC,OAAA;cAAIsC,SAAS,EAAC,kCAAkC;cAAAC,QAAA,EAAC;YAAe;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACrE3C,OAAA;cAAGsC,SAAS,EAAC,qBAAqB;cAAAC,QAAA,GAC7BhC,YAAY,CAACyC,QAAQ,EAAC,UAAG,EAAC,IAAIZ,IAAI,CAAC7B,YAAY,CAAC4C,UAAU,CAAC,CAACG,cAAc,CAAC,CAAC;YAAA;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9E,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACN3C,OAAA;YACIwD,OAAO,EAAEA,CAAA,KAAMhD,eAAe,CAAC,IAAI,CAAE;YACrC8B,SAAS,EAAC,qDAAqD;YAAAC,QAAA,eAE/DvC,OAAA,CAACJ,CAAC;cAAC0C,SAAS,EAAC;YAAwB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC,eACN3C,OAAA;UAAKsC,SAAS,EAAC,8BAA8B;UAAAC,QAAA,EACxChC,YAAY,CAACkD,UAAU,GACpB,CAAC,MAAM;YACH,IAAIC,eAAe;YACnB,IAAI;cAAEA,eAAe,GAAGC,IAAI,CAACC,KAAK,CAACrD,YAAY,CAACkD,UAAU,CAAC;YAAE,CAAC,CAC9D,MAAM;cAAEC,eAAe,GAAG,EAAE;YAAE;YAC9B,OAAOA,eAAe,CAACd,MAAM,GAAG,CAAC,gBAC7B5C,OAAA;cAAKsC,SAAS,EAAC,WAAW;cAAAC,QAAA,EACrBmB,eAAe,CAACb,GAAG,CAAC,CAACgB,IAAI,EAAEC,KAAK,kBAC7B9D,OAAA;gBAEIsC,SAAS,EAAE,QAAQuB,IAAI,CAACE,IAAI,KAAK,IAAI,GAAG,eAAe,GAAG,aAAa,EAAG;gBAAAxB,QAAA,eAE1EvC,OAAA;kBACIsC,SAAS,EAAE,8CACPuB,IAAI,CAACE,IAAI,KAAK,IAAI,GACZ,2BAA2B,GAC3B,6BAA6B,EACpC;kBAAAxB,QAAA,gBAEHvC,OAAA;oBAAKsC,SAAS,EAAC,qCAAqC;oBAAAC,QAAA,EAC/CsB,IAAI,CAACE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACT,CAAC,eACN3C,OAAA;oBAAKsC,SAAS,EAAC,SAAS;oBAAAC,QAAA,EAAEsB,IAAI,CAACrC;kBAAI;oBAAAgB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzC;cAAC,GAdDmB,KAAK;gBAAAtB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAeT,CACR;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,gBAEN3C,OAAA;cAAKsC,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAC9BvC,OAAA;gBAAKsC,SAAS,EAAC,mFAAmF;gBAAAC,QAAA,eAC9FvC,OAAA,CAACH,KAAK;kBAACyC,SAAS,EAAC;gBAAwB;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3C,CAAC,eACN3C,OAAA;gBAAGsC,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,EAAC;cAAqC;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtE,CACR;UACL,CAAC,EAAE,CAAC,gBAEJ3C,OAAA;YAAKsC,SAAS,EAAC,mBAAmB;YAAAC,QAAA,gBAC9BvC,OAAA;cAAKsC,SAAS,EAAC,mFAAmF;cAAAC,QAAA,eAC9FvC,OAAA,CAACH,KAAK;gBAACyC,SAAS,EAAC;cAAwB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3C,CAAC,eACN3C,OAAA;cAAGsC,SAAS,EAAC,gBAAgB;cAAAC,QAAA,EAAC;YAAqC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtE;QACR;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd;AAACzC,EAAA,CAzOQD,KAAK;AAAA+D,EAAA,GAAL/D,KAAK;AA2Od,eAAeA,KAAK;AAAC,IAAA+D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}